define("gpub",function(){var t={methodMapping:{publish:"publish",subscribe:"subscribe",unsubscribe:"unsubscribe"}},s=function(s){this.options=i(s||{},t),this._callbacks={}},i=function(t,s){for(var i in s)i in t||(t[i]=s[i]);return t},n=function(t,s,i){var n,r,c;for(r=0,c=t.length;c>r&&(n=t[r],!n||(i.event=n,i.target=n.target,n.callback.apply(n.scope,s)));r++);},r=[].slice;return s.prototype.simple=function(t,s,i){var n=t({});s=s||{},i=i||this.options.methodMapping,s[i.publish]=function(){n.trigger.apply(n,arguments)},s[i.subscribe]=function(){n.on.apply(n,arguments)},s[i.unsubscribe]=function(){n.off.apply(n,arguments)}},s.prototype.subscribe=function(t,s,i){var n=this._callbacks[t]||(this._callbacks[t]=[]),r={};return r.topic=t,r.callback=s,r.scope=i||this,r.target=this,n.push(r),this},s.prototype.subscribers=function(t){return this._callbacks.hasOwnProperty(t)&&this._callbacks[t].length>0},s.prototype.publish=function(t,s){var i=r.call(arguments,1);s=s||{},i.push(s);var c,a,e;return(a=this._callbacks)?(c=a[t])||a.all?((e=a.all)&&n.call(this,e,r.call(arguments,0),s),c&&n.call(this,c,i,s),this):this:this},s.prototype.unsubscribe=function(t,s){var i,n,r,c;if(!(n=this._callbacks))return this;if(!(i=n[t]))return this;for(r=0,c=i.length;c>r;r++)i[r].callback===s&&i.splice(r,1);return this},s});